<wdkModel>

  <querySet name="OrganismIdQueries" queryType="id" isCacheable="true">

    <sqlQuery name="AllOrganisms">
      <column name="source_id"/>
      <sql>
        <![CDATA[
          select oa.source_id
          from apidbTuning.OrganismAttributes oa
        ]]>
      </sql>
    </sqlQuery>
  </querySet>

  <querySet name="OrganismAttributes" queryType="attribute" isCacheable="false">

    <sqlQuery name="OrganismAlias" doNotTest="true">
      <column name="source_id"/>
      <column name="old_source_id"/>
      <sql>
        <![CDATA[
          select source_id, source_id as old_source_id
          from apidbTuning.OrganismAttributes
        ]]>
      </sql>
    </sqlQuery>

    <sqlQuery name="organismAttrs">
      <column name="source_id" ignoreCase="true"/>
      <column name="data_source" ignoreCase="true"/>
      <column name="species" ignoreCase="true"/>
      <column name="organism_full"/>
      <column name="organism"/>
      <sql>
        <![CDATA[
          select source_id, species, organism_name AS organism_full, organism_name AS organism,
                 decode(genome_source, 'gb', 'GenBank',
                        'jkissinger', 'Kissinger Lab', genome_source)
                   as data_source
          from apidbTuning.OrganismAttributes
        ]]>
      </sql>
    </sqlQuery>

  </querySet>

  <querySet name="OrganismTables" queryType="table" isCacheable="false">

    <sqlQuery name="GenomeSequencingAndAnnotation">
      <column name="source_id"/>
      <column name="description"/>
      <sql>
        <![CDATA[
          select oa.source_id, dsp.description
          from apidbTuning.DatasetPresenter dsp, apidbTuning.DatasetNameTaxon dnt,
               apidbTuning.OrganismAttributes oa
          where dsp.type = 'genome'
            and dsp.dataset_presenter_id = dnt.dataset_presenter_id
            and oa.component_taxon_id = dnt.taxon_id
        ]]>
      </sql>
    </sqlQuery>

  </querySet>

</wdkModel>
