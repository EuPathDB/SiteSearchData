<wdkModel>

  <questionSet name="Questions" displayName="dontcare">

    <question name="GenesByOrganism" displayName="dontcare"
              queryRef="GeneIdQueries.GenesByOrganismAbbrev"
              recordClassRef="recordClasses.gene">
    </question>

    <question name="EstsByOrganism" displayName="dontcare"
              queryRef="EstIdQueries.EstsByOrganismAbbrev"
              recordClassRef="recordClasses.est">
    </question>

    <question name="Pathways" displayName="dontcare"
              queryRef="PathwayIdQueries.AllPathways"
              recordClassRef="recordClasses.pathway">
    </question>

    <question name="Compounds" displayName="dontcare"
              queryRef="CompoundIdQueries.AllCompounds"
              recordClassRef="recordClasses.compound">
    </question>

    <question name="Datasets" displayName="dontcare"
              queryRef="DatasetIdQueries.AllDatasets"
              recordClassRef="recordClasses.dataset">
    </question>

    <question name="Organisms" displayName="dontcare"
              queryRef="OrganismIdQueries.Organisms"
              recordClassRef="recordClasses.organism">
    </question>

    <question name="Sequences" displayName="dontcare"
              queryRef="SequenceIdQueries.SequencesByOrganismAbbrev"
              recordClassRef="recordClasses.sequence">
    </question>

  </questionSet>

  <recordClassSet name="recordClasses">

    <!-- ################################################################### -->
    <!-- ########################  Organism Record  ######################## -->
    <!-- ################################################################### -->

    <recordClass name="organism" urlName="organism" displayName="Organism">
      <propertyList name="batch">
        <value>dataset-presenter</value>
      </propertyList>

      <primaryKey aliasQueryRef="OrganismAttributes.OrganismAlias">
        <columnRef>source_id</columnRef>
      </primaryKey>

      <idAttribute name="primary_key" displayName="Organism ID">
        <text>
          <![CDATA[
                   $$source_id$$
          ]]>
        </text>
      </idAttribute>

      <reporter name="solrjson"
                displayName="solr json: choose from columns and/or tables"
                scopes=""
                implementation="org.eupathdb.sitesearchdata.model.report.SolrLoaderReporter"/>

      <attributeQueryRef ref="OrganismAttributes.organismAttrs">
        <columnAttribute name="species" displayName="Species"/>
        <columnAttribute name="organism" displayName="dontcare" internal="true"/>  <!-- special field for organism filtering -->
        <columnAttribute name="organism_full" displayName="Organism">
          <propertyList name="isSummary">
            <value>true</value>
          </propertyList>
        </columnAttribute>
        <columnAttribute name="data_source" displayName="Data source"/>

      </attributeQueryRef>

      <table name="GenomeSequencingAndAnnotationAttribution"
             displayName="Genome Sequencing and Annotation"
             queryRef="OrganismTables.GenomeSequencingAndAnnotation">
        <columnAttribute displayName="Description" name="description"/>

      </table>

    </recordClass>

    <!-- ################################################################### -->
    <!-- ########################  Sequence Record  ######################## -->
    <!-- ################################################################### -->

    <recordClass name="sequence" urlName="genomic-sequence" displayName="Genomic sequence">
      <propertyList name="batch">
        <value>organism</value>
      </propertyList>

      <primaryKey aliasQueryRef="SequenceAttributes.SequenceAlias">
        <columnRef>source_id</columnRef>
      </primaryKey>

      <idAttribute name="primary_key" displayName="Sequence ID">
        <text>
          <![CDATA[
                   $$source_id$$
          ]]>
        </text>
      </idAttribute>

      <reporter name="solrjson"
                displayName="solr json: choose from columns and/or tables"
                scopes=""
                implementation="org.eupathdb.sitesearchdata.model.report.SolrLoaderReporter"/>

      <attributeQueryRef ref="SequenceAttributes.Bfmv">
        <columnAttribute name="description" displayName="Description">
          <propertyList name="isSummary">
            <value>true</value>
          </propertyList>
        </columnAttribute>
        <columnAttribute name="organism" displayName="dontcare" internal="true"/>  <!-- special field for organism filtering -->
        <columnAttribute name="organism_full" displayName="Organism">
          <propertyList name="isSummary">
            <value>true</value>
          </propertyList>
        </columnAttribute>
        <columnAttribute name="genbank_accession" displayName="GenBank"/>
      </attributeQueryRef>

      <table name="Aliases"
             displayName="Previous Identifiers and Aliases"
             queryRef="SequenceTables.Aliases">
        <columnAttribute name="seq_id" displayName="Sequence ID"/>
      </table>



    </recordClass>

    <!-- ################################################################### -->
    <!-- ########################  Pathway Record  ######################### -->
    <!-- ################################################################### -->

    <recordClass name="pathway" urlName="pathway" displayName="Metabolic Pathway">
      <propertyList name="batch">
        <value>pathway</value>
      </propertyList>

      <primaryKey aliasQueryRef="PathwayAttributes.PathwayAlias">
        <columnRef>pathway_source</columnRef>
        <columnRef>source_id</columnRef>
      </primaryKey>

      <idAttribute name="primary_key" displayName="Pathway Id">
        <text>
          <![CDATA[
               $$source_id$$
          ]]>
        </text>
      </idAttribute>

      <textAttribute name="pathway_source_text" displayName="Pathway Source">
        <text>
          <![CDATA[
               $$pathway_source$$
          ]]>
        </text>
      </textAttribute>

      <reporter name="solrjson"
                displayName="solr json: choose from columns and/or tables"
                scopes=""
                implementation="org.eupathdb.sitesearchdata.model.report.SolrLoaderReporter"/>

      <attributeQueryRef ref="PathwayAttributes.Bfmv">
        <columnAttribute name="project" displayName="dontcare" internal="true"/>  <!-- special field for project filtering -->
        <columnAttribute name="name" displayName="Pathway">
          <propertyList name="isSummary">
            <value>true</value>
          </propertyList>
        </columnAttribute>
      </attributeQueryRef>

      <table name="CompoundsMetabolicPathways"
             displayName="Metabolic Pathway Reactions"
             queryRef="PathwayTables.CompoundsFromMetabolicPathways" >
        <columnAttribute displayName="EC Number" name="ec_number"/>
        <columnAttribute displayName="Enzyme Description" name="enzyme_description"/>
        <columnAttribute displayName="Substrates" name="substrates_text"/>
        <columnAttribute displayName="Products" name="products_text"/>
      </table>


    </recordClass>

    <!-- ################################################################### -->
    <!-- ########################  Compound Record  ######################## -->
    <!-- ################################################################### -->

    <recordClass name="compound" urlName="compound" displayName="Compound">
      <propertyList name="batch">
        <value>compound</value>
      </propertyList>

      <primaryKey aliasQueryRef="CompoundAttributes.CompoundAlias">
        <columnRef>source_id</columnRef>
      </primaryKey>

      <idAttribute name="primary_key" displayName="ChEBI ID">
        <text>
          <![CDATA[
                   $$source_id$$
          ]]>
        </text>
      </idAttribute>

      <reporter name="solrjson"
                displayName="solr json: choose from columns and/or tables"
                scopes=""
                implementation="org.eupathdb.sitesearchdata.model.report.SolrLoaderReporter"/>

      <attributeQueryRef ref="CompoundAttributes.Bfmv">
        <columnAttribute name="project" displayName="dontcare" internal="true"/>  <!-- special field for project filtering -->
        <columnAttribute name="definition" displayName="Definition" >
          <propertyList name="isSummary">
            <value>true</value>
          </propertyList>
        </columnAttribute>
        <columnAttribute name="formula" displayName="Molecular Formula"/>
        <columnAttribute name="compound_name" displayName="Compound Name" >
          <propertyList name="isSummary">
            <value>true</value>
          </propertyList>
        </columnAttribute>
        <columnAttribute name="secondary_ids"  displayName="Secondary ChEBI IDs"/>  <!-- THIS SHOULD BE IN A MULTI-ROW TABLE? -->
      </attributeQueryRef>

      <attributeQueryRef ref="CompoundAttributes.Synonyms" >
        <columnAttribute name="synonyms" displayName="Synonyms"/>
      </attributeQueryRef>

      <table name="Properties" displayName="Compound Properties"
             queryRef="CompoundTables.Properties">
        <columnAttribute name="value" displayName="Value"/>
      </table>

      <table name="IupacNames" displayName="IUPAC Names"
             queryRef="CompoundTables.IupacNames">
        <columnAttribute name="value" displayName="Value"/>
      </table>

      <table name="Synonyms" displayName="Compound Synonyms"
             queryRef="CompoundTables.Synonyms">
        <columnAttribute name="value" displayName="Value"/>
      </table>

      <table name="CompoundsMetabolicPathways"
             displayName="Metabolic Pathway Reactions"
             queryRef="CompoundTables.CompoundsFromMetabolicPathways">

        <columnAttribute displayName="Substrates" name="substrates_text"/>
        <columnAttribute displayName="Products" name="products_text"/>
      </table>

      <table name="PathwaysFromCompounds"
             displayName="Metabolic Pathways"
             queryRef="CompoundTables.PathwaysFromCompounds">
        <columnAttribute name="pathway_name" displayName="Pathway"/>
      </table>

    </recordClass>

    <!-- ################################################################### -->
    <!-- ###########################  EST Record  ########################## -->
    <!-- ################################################################### -->

    <recordClass name="est" urlName="est" displayName="EST">
      <propertyList name="batch">
        <value>organism</value>
      </propertyList>

      <primaryKey aliasQueryRef="EstTableQueries.EstAlias">
        <columnRef>source_id</columnRef>
      </primaryKey>

      <idAttribute name="primary_key" displayName="EST Id">
        <text>
          <![CDATA[
                   $$source_id$$
          ]]>
        </text>
      </idAttribute>

      <reporter name="solrjson"
                displayName="solr json: choose from columns and/or tables"
                scopes=""
                implementation="org.eupathdb.sitesearchdata.model.report.SolrLoaderReporter"/>

      <attributeQueryRef ref="EstAttributeQueries.Bfmv">
        <columnAttribute name="dbest_name" displayName="Library">
          <propertyList name="isSummary">
            <value>true</value>
          </propertyList>
        </columnAttribute>
        <columnAttribute name="vector" displayName="Vector"/>
        <columnAttribute name="stage"  displayName="Stage"/>
      </attributeQueryRef>

      <table name="ReferenceInfo" displayName="Reference" queryRef="EstTableQueries.Reference">
        <columnAttribute name="author" displayName="Author"/>
        <columnAttribute name="affiliation" displayName="Affiliation"/>
      </table>
    </recordClass>

    <!-- ################################################################### -->
    <!-- ##########################  Gene Record  ########################## -->
    <!-- ################################################################### -->

    <recordClass name="gene" urlName="gene">

      <propertyList name="batch">
        <value>organism</value>
      </propertyList>

      <primaryKey aliasQueryRef="GeneAttributes.GeneAlias">
        <columnRef>source_id</columnRef>
      </primaryKey>

      <idAttribute name="primary_key"
                   displayName="Gene ID"
                   attributeCategory="deep">
        <text>
          <![CDATA[
                   $$source_id$$
          ]]>
        </text>
      </idAttribute>

      <reporter name="solrjson"  displayName="solr json: choose from columns and/or tables" scopes=""
                implementation="org.eupathdb.sitesearchdata.model.report.SolrLoaderReporter"/>

      <attributeQueryRef ref="GeneAttributes.Bfmv">
        <columnAttribute displayName="Genomic Sequence ID" name="sequence_id"/>

        <columnAttribute name="product" displayName="Product Description" help="Protein Product for this gene" >
          <propertyList name="isSummary">
            <value>true</value>
          </propertyList>
        </columnAttribute>

        <columnAttribute name="gene_type" displayName="Gene Type" help="Gene Product Categories"/>
        <columnAttribute name="name" displayName="Gene Name or Symbol"/>
        <columnAttribute name="organism_text" displayName="Organism"/>
        <columnAttribute name="organism" displayName="dontcare" internal="true"/>  <!-- special field for organism filtering -->
        <columnAttribute name="organism_full" displayName="Organism" >
          <propertyList name="isSummary">
            <value>true</value>
          </propertyList>
        </columnAttribute>
        <columnAttribute name="genus_species" displayName="genus_species"/>
        <columnAttribute name="strain" displayName="strain"/>
      </attributeQueryRef>

      <table name="GeneTranscripts"
             displayName="Transcripts"
             queryRef="GeneTables.GeneTranscripts">
        <columnAttribute name="transcript_id" displayName="Transcript"/>
      </table>

      <table name="InterPro"
             displayName="InterPro Domains"
             queryRef="GeneTables.InterPro">
        <columnAttribute displayName="Name" name="interpro_name"/>
        <columnAttribute displayName="Interpro ID" name="interpro_family_id"/>
        <columnAttribute displayName="Primary ID" name="interpro_primary_id"/>
        <columnAttribute displayName="Secondary ID" name="interpro_secondary_id"/>
        <columnAttribute displayName="Description" name="interpro_desc"/>
      </table>

      <table name="Notes"
             displayName="Notes from Annotator"
             queryRef="GeneTables.Notes">
        <columnAttribute displayName="Note" name="comment_string"/>
      </table>

      <!-- needed for the user comment updater. -->
      <table name="userCommentIds"
             internal="true"
             displayName="User Comment IDs"
             queryRef="GeneTables.UserCommentIDs">
        <columnAttribute displayName="Comment ID" name="comment_id"/>
      </table>

      <table name="UserCommentContent"
             displayName="User Comments"
             queryRef="GeneTables.UserCommentContent">
        <columnAttribute displayName="Comment" name="content"/>
      </table>

      <table name="ECNumbers"
             displayName="EC Numbers"
             queryRef="GeneTables.ECNumbers">
        <columnAttribute name="ec_number" displayName="EC Number" help="Enzyme Commission classification of enzyme based on the reactions they catalyze" truncateTo="1000"/>
        <columnAttribute name="ec_description" displayName="EC Description" help="Enzyme Commission classification description of this assignment"  truncateTo="1000"/>
      </table>

      <table name="GOTerms"
             displayName="GO Terms"
             queryRef="GeneTables.GOTerms">
        <columnAttribute name="go_id" displayName="GO ID"/>
        <columnAttribute name="go_term_name" displayName="GO Term Name"/>
        <columnAttribute name="reference" displayName="Reference" help="The reference indicates the source, such as a publication or database record, that is cited as an authority for the association of GO term to the gene product."/>
      </table>

      <table name="MetabolicPathwaysMPMP"
             displayName="Malaria Parasite Metabolic Pathways (MPMP)"
             queryRef="GeneTables.MetabolicPathways">
        <columnAttribute name="pathway_id"/>
        <columnAttribute name="pathway_name"  displayName="Pathway"/>
      </table>

      <table name="MetabolicPathways"
             displayName="Metabolic Pathways"
             queryRef="GeneTables.MetabolicPathwaysSres">
        <columnAttribute name="pathway_source_id"/>
        <columnAttribute name="pathway_name"  displayName="Pathway"/>
      </table>

      <table name="Alias"
             displayName="Names, Previous Identifiers, and Aliases"
             queryRef="GeneTables.Alias">
        <columnAttribute displayName="Name/ID/Alias" name="alias"/>
        <columnAttribute displayName="Type" name="id_type"/>
      </table>

      <table name="PubMed"
             displayName="PubMed"
             queryRef="GeneTables.PubMed">
        <columnAttribute displayName="PubMed ID" name="pubmed_id"/>
        <columnAttribute displayName="doi" name="doi"/>
        <columnAttribute displayName="Title" name="title"/>
        <columnAttribute displayName="Authors" name="authors"/>
      </table>

      <table name="GeneLinkouts"
             displayName="External Links"
             queryRef="GeneTables.gene_dbrefs">
        <columnAttribute name="ext_id"/>
      </table>

      <table name="PdbSimilarities"
             displayName="Similarities to Protein Data Bank (PDB) Chains"
             queryRef="GeneTables.PdbSimilarities">
        <columnAttribute name="pdb_chain"  displayName="PDB Structure"/>
        <columnAttribute name="pdb_id"/>
        <columnAttribute name="pdb_title" displayName="PDB Molecular Description"/>
      </table>

      <table name="Epitopes"
             displayName="Epitopes from IEDB"
             queryRef="GeneTables.Epitopes">
        <columnAttribute name="iedb_id"  displayName="Epitope"/>
      </table>

      <table name="PreferredProducts"
             displayName="Annotated Product Descriptions"
             queryRef="GeneTables.PreferredProducts">
        <columnAttribute name="product" displayName="Product"/>
        <columnAttribute name="reference" displayName="Reference"/>
      </table>

    </recordClass>

    <!-- ################################################################### -->
    <!-- #########################  Dataset Record  ######################## -->
    <!-- ################################################################### -->

    <recordClass name="dataset" urlName="dataset" displayName="Dataset">
      <propertyList name="batch">
        <value>dataset-presenter</value>
      </propertyList>

      <primaryKey aliasPluginClassName="org.gusdb.wdk.model.record.GenericRecordPrimaryKeyAliasPlugin">
        <columnRef>dataset_id</columnRef>
      </primaryKey>

      <idAttribute name="primary_key" displayName="Data Set">
        <text>
          <![CDATA[ $$display_name$$ ]]>
        </text>
      </idAttribute>

      <reporter name="solrjson"
                displayName="solr json: choose from columns and/or tables"
                scopes=""
                implementation="org.eupathdb.sitesearchdata.model.report.SolrLoaderReporter"/>

      <attributeQueryRef ref="DatasetAttributes.All">
        <columnAttribute name="display_name" displayName="Dataset Name">
          <propertyList name="isSummary">
            <value>true</value>
          </propertyList>
        </columnAttribute>
        <columnAttribute name="description" displayName="Description"/>
        <columnAttribute name="acknowledgement"/>
        <columnAttribute name="summary" displayName="Summary">
          <propertyList name="isSummary">
            <value>true</value>
          </propertyList>
        </columnAttribute>
        <columnAttribute name="newcategory" displayName="Category"/>
      </attributeQueryRef>

      <table name="Contacts"
             displayName="Principal Investigator and Collaborators"
             queryRef="DatasetTables.Contacts">
        <columnAttribute name="dataset_id"/>
        <columnAttribute name="contact_name" displayName="Investigator"/>
        <columnAttribute name="affiliation" displayName="Affiliation"/>
      </table>

      <table name="Publications"
             displayName="Associated Publications"
             queryRef="DatasetTables.Publications">
        <columnAttribute name="dataset_id"/>
        <columnAttribute name="pmid" displayName="Pubmed ID"/>
        <columnAttribute name="citation"/>
      </table>

    </recordClass>

  </recordClassSet>

</wdkModel>
