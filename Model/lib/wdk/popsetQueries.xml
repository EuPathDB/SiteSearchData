<wdkModel>

  <querySet name="PopsetIds" queryType="id" isCacheable="false">

    <sqlQuery name="PopsetByOrganismAbbrev">
      <paramRef ref="popsetParams.organismAbbrev"/>
      <column name="source_id"/>
      <sql>
        <![CDATA[
          select pa.source_id
          from apidbTuning.PopsetAttributes pa, apidb.Organism o
          where pa.taxon_id = o.taxon_id
            and o.abbrev = $$organismAbbrev$$
        ]]>
      </sql>
    </sqlQuery>

  </querySet>

  <querySet name="PopsetParamQueries" queryType="vocab"  isCacheable="false">
    <sqlQuery name="organismAbbrevs">
      <column name="internal"/>
      <column name="term"/>
      <sql>
        <![CDATA[
          SELECT distinct o.abbrev as internal,
                          o.abbrev as term
          from apidb.organism o
        ]]>
      </sql>
    </sqlQuery>

  </querySet>

  <paramSet name="popsetParams">
    <flatVocabParam name="organismAbbrev"
                    queryRef="SequenceParamQueries.organismAbbrevs"
                    multiPick="false"
                    prompt="Organism abbrev"
                    quote="true">
    </flatVocabParam>
  </paramSet>

  <querySet name="PopsetAttributes" queryType="attribute" isCacheable="false">

    <sqlQuery name="PopsetAlias">
      <column name="source_id"/>
      <column name="old_source_id"/>
      <sql>
        <![CDATA[
          select source_id, source_id as old_source_id,
          from apidbTuning.PopsetAttributes 
        ]]>
      </sql>
    </sqlQuery>

    <sqlQuery name="Attributes">
      <column name="source_id"/>
      <column name="organism"/>
      <column name="organism_full"/>
      <column name="description"/>
      <column name="isolation_source"/>
      <column name="curated_isolation_source"/>
      <column name="note"/>
      <column name="gene_name"/>
      <column name="product"/>
      <column name="geographic_location"/>
      <column name="curated_geographic_location"/>
      <column name="specific_host"/>
      <column name="popset"/>
      <column name="strain"/>
      <sql>
        <![CDATA[
          select source_id, organism, organism as organism_full, description,
                 isolation_source, curated_isolation_source,
		 note, gene_name, product,
                 geographic_location,curated_geographic_location, 
                 host as specific_host, popset, strain
          from apidbTuning.PopsetAttributes
        ]]>
      </sql>
    </sqlQuery>

  </querySet>

</wdkModel>
