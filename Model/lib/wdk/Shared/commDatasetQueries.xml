<wdkModel>

  <querySet name="CommunityDatasetIdQueries" queryType="id" isCacheable="true">

    <!-- TEMPORARY -->
    <sqlQuery name="AllCommunityDatasets">
      <column name="dataset_id"/>
      <sql>
        <![CDATA[
          select user_dataset_id as dataset_id
          from vdi_control_@VDI_SCHEMA_SUFFIX@.AvailableUserDatasets
          where is_public = 1
          and user_id is not null  -- temporarily compensate for bug in AvailableUserDatasets view defintion
          and project_id = '@PROJECT_ID@'
        ]]>
      </sql>
    </sqlQuery>
  </querySet>

    <!-- REPLACE WITH PROCESS QUERY 
    <processQuery name="AllCommunityDatasets"
        processName=org.eupathdb.sitesearch.wsfplugin.CommunityStudyIdsPlugin">
      <wsColumn name="dataset_id" width="50" wsName="dataset_id"/>
      <wsColumn name="owner_name" width="100" wsName="owner_name"/>
      <wsColumn name="owner_name" width="100" wsName="owner_institution"/>
    -->

  <querySet name="CommunityDatasetAttributes" queryType="attribute" isCacheable="false">
    <sqlQuery name="All">
      <column name="hyperlinkName"/>
      <column name="dataset_id"/>
      <column name="display_name"/>
      <column name="project"/>
      <column name="description"/>
      <column name="summary"/>
      <sql>
        <![CDATA[
          select user_dataset_id as dataset_id, '@PROJECT_ID@' as project,
                 name, name as display_name, name as hyperlinkName, description, 'no summary yet' as summary
          from vdi_control_@VDI_SCHEMA_SUFFIX@.AvailableUserDatasets
          where is_public = 1
          and user_id is not null -- temporarily compensate for bug in AvailableUserDatasets view defintion
          and project_id = '@PROJECT_ID@'            
        ]]>
      </sql>
    </sqlQuery>

  </querySet>


</wdkModel>
